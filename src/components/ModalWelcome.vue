<template>
  <div v-if="open" class="modal-overlay" @click.self="close">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="welcome-title">
      <div class="modal-header" id="welcome-title">ã“ã‚“ã«ã¡ã¯ï¼</div>
      <div class="modal-body">
        <p>ä»Šæ—¥ã‚‚é›»è»Šã‚²ãƒ¼ãƒ ã§ã‚ãã¼ã†ï¼</p>
        <p>ãƒ•ãƒªãƒƒã‚¯ã§é›»è»ŠãŒé€²ã‚€ã‚ˆğŸšƒ</p>
      </div>
      <div class="modal-footer">
        <button class="modal-button" @click="close">é–‰ã˜ã‚‹</button>
        <button class="modal-button modal-button--primary" @click="start">ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onBeforeUnmount } from 'vue'

const props = defineProps<{ initialOpen?: boolean }>()
const emit = defineEmits<{ (e: 'close'): void; (e: 'start'): void }>()

const open = ref(!!props.initialOpen)

function close() {
  open.value = false
  emit('close')
}
function start() {
  open.value = false
  emit('start')
}

function onKeydown(e: KeyboardEvent) {
  if (e.key === 'Escape') close()
}
onMounted(() => window.addEventListener('keydown', onKeydown))
onBeforeUnmount(() => window.removeEventListener('keydown', onKeydown))
</script>

<style scoped>
/* æœ€å°ã®èª¿æ•´ã€‚ãƒ™ãƒ¼ã‚¹ã®è¦‹ãŸç›®ã¯SCSSã«å¯„ã›ã¾ã™ */
</style>
